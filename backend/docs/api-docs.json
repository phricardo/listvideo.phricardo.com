{
   "openapi":"3.1.0",
   "info":{
      "title":"ListVideo API",
      "description":"Turning playlists into a powerful courses platform",
      "contact":{
         "url":"https://www.phricardo.com/",
         "email":"hi@phricardo.com"
      },
      "version":"v1"
   },
   "servers":[
      {
         "url":"https://listvideo-api.phricardo.com",
         "description":"Listvideo PROD API"
      }
   ],
   "tags":[
      {
         "name":"Certificate",
         "description":"Endpoints for certificates"
      },
      {
         "name":"Authentication",
         "description":"Endpoints for user authentication and registration"
      },
      {
         "name":"Account",
         "description":"Endpoints for user account"
      },
      {
         "name":"User",
         "description":"Endpoints for user"
      },
      {
         "name":"Status",
         "description":"Application health and feature availability"
      }
   ],
   "paths":{
      "/v1/me/saved-courses":{
         "get":{
            "tags":[
               "saved-course-controller"
            ],
            "operationId":"listMine",
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "type":"array",
                           "items":{
                              "$ref":"#/components/schemas/SavedCourseResponseDTO"
                           }
                        }
                     }
                  }
               }
            }
         },
         "post":{
            "tags":[
               "saved-course-controller"
            ],
            "operationId":"upsert",
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/SavedCourseCreateRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/SavedCourseResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/certificate":{
         "post":{
            "tags":[
               "Certificate"
            ],
            "summary":"Generate Certificate",
            "description":"Generates a certificate based on the provided data.",
            "operationId":"generateCertificate",
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/CertificateDataRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "type":"string",
                           "format":"binary"
                        }
                     }
                  }
               }
            },
            "security":[
               {
                  "bearer-key":[
                     
                  ]
               }
            ]
         }
      },
      "/v1/auth/register":{
         "post":{
            "tags":[
               "Authentication"
            ],
            "summary":"User Registration",
            "description":"Registers a new user.",
            "operationId":"register",
            "parameters":[
               {
                  "name":"language",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/UserAuthRegisterRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/auth/logout":{
         "post":{
            "tags":[
               "Authentication"
            ],
            "summary":"User Logout",
            "description":"Clears the authentication cookie and ends the current user session.",
            "operationId":"logout",
            "responses":{
               "200":{
                  "description":"OK"
               }
            }
         }
      },
      "/v1/auth/login":{
         "post":{
            "tags":[
               "Authentication"
            ],
            "summary":"User Login",
            "description":"Authenticates a user and returns a JWT token if the credentials are valid.",
            "operationId":"login",
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/UserAuthLoginRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/TokenResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/account/password/reset":{
         "post":{
            "tags":[
               "Account"
            ],
            "summary":"Reset User Password if Token is Valid",
            "description":"Resets the user's password in the application based on the validity of the token.",
            "operationId":"resetUserPassword",
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/UserForgotPasswordRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserForgotPasswordResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/account/password/forgot":{
         "post":{
            "tags":[
               "Account"
            ],
            "summary":"Send Password Reset Token",
            "description":"Generates a password reset token and sends it to the user's email if they are registered.",
            "operationId":"sendPasswordResetLink",
            "parameters":[
               {
                  "name":"email",
                  "in":"query",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               },
               {
                  "name":"language",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK"
               }
            }
         }
      },
      "/v1/account/activation/resend":{
         "post":{
            "tags":[
               "Account"
            ],
            "summary":"User account activation resend",
            "description":"Resend user account activation link to email",
            "operationId":"accountActivationEmailResend",
            "parameters":[
               {
                  "name":"email",
                  "in":"query",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               },
               {
                  "name":"language",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK"
               }
            }
         }
      },
      "/v1/me/saved-courses/{id}":{
         "delete":{
            "tags":[
               "saved-course-controller"
            ],
            "operationId":"delete",
            "parameters":[
               {
                  "name":"id",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string",
                     "format":"uuid"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK"
               }
            }
         },
         "patch":{
            "tags":[
               "saved-course-controller"
            ],
            "operationId":"update",
            "parameters":[
               {
                  "name":"id",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string",
                     "format":"uuid"
                  }
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/SavedCourseUpdateRequestDTO"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/SavedCourseResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/account/activation/{userId}":{
         "patch":{
            "tags":[
               "Account"
            ],
            "summary":"Activate User Account",
            "description":"Activates a user's account based on the provided user ID.",
            "operationId":"activeAccount",
            "parameters":[
               {
                  "name":"userId",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/users/{username}/saved-courses":{
         "get":{
            "tags":[
               "saved-course-controller"
            ],
            "operationId":"listByUsername",
            "parameters":[
               {
                  "name":"username",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "type":"array",
                           "items":{
                              "$ref":"#/components/schemas/SavedCourseResponseDTO"
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/user/{username}":{
         "get":{
            "tags":[
               "User"
            ],
            "summary":"Get User by Username",
            "description":"Retrieves user information based on the provided username.",
            "operationId":"getUserByUsername",
            "parameters":[
               {
                  "name":"username",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/user/check-username/{username}":{
         "get":{
            "tags":[
               "User"
            ],
            "summary":"Check Username Availability",
            "description":"Verifies if the provided username is already registered.",
            "operationId":"isUsernameRegistered",
            "parameters":[
               {
                  "name":"username",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserAvailabilityUsernameResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/status/health":{
         "get":{
            "tags":[
               "Status"
            ],
            "summary":"Health check",
            "description":"Returns UP when the API is reachable.",
            "operationId":"healthCheck",
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/HealthStatusResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/status/features":{
         "get":{
            "tags":[
               "Status"
            ],
            "summary":"Feature toggles",
            "description":"Returns frontend-facing feature availability flags.",
            "operationId":"featureFlags",
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/FeatureFlagsResponseDTO"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/certificate/{username}/{certificateId}":{
         "get":{
            "tags":[
               "Certificate"
            ],
            "summary":"Get Certificate by ID",
            "description":"Retrieves a certificate by its ID and username.",
            "operationId":"getCertificateByCourseId",
            "parameters":[
               {
                  "name":"certificateId",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               },
               {
                  "name":"username",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "type":"string",
                           "format":"binary"
                        }
                     }
                  }
               }
            }
         }
      },
      "/v1/auth/authenticated/user":{
         "get":{
            "tags":[
               "Authentication"
            ],
            "summary":"Get Current Authenticated User",
            "description":"Retrieves information about the currently authenticated user.",
            "operationId":"getCurrentAuthenticatedUser",
            "responses":{
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/UserResponseDTO"
                        }
                     }
                  }
               }
            },
            "security":[
               {
                  "bearer-key":[
                     
                  ]
               }
            ]
         }
      }
   },
   "components":{
      "schemas":{
         "SavedCourseCreateRequestDTO":{
            "type":"object",
            "properties":{
               "youtubePlaylistId":{
                  "type":"string",
                  "minLength":1
               },
               "youtubeChannelId":{
                  "type":"string",
                  "minLength":1
               },
               "youtubeChannelTitle":{
                  "type":"string",
                  "minLength":1
               },
               "customTitle":{
                  "type":"string",
                  "maxLength":255,
                  "minLength":0
               },
               "category":{
                  "type":"string",
                  "minLength":1
               },
               "iconKey":{
                  "type":"string",
                  "minLength":1
               }
            },
            "required":[
               "category",
               "customTitle",
               "iconKey",
               "youtubeChannelId",
               "youtubeChannelTitle",
               "youtubePlaylistId"
            ],
            "title":"Saved Course Create Request"
         },
         "SavedCourseResponseDTO":{
            "type":"object",
            "properties":{
               "id":{
                  "type":"string",
                  "format":"uuid"
               },
               "userId":{
                  "type":"string"
               },
               "youtubePlaylistId":{
                  "type":"string"
               },
               "authorChannelId":{
                  "type":"string"
               },
               "authorChannelTitle":{
                  "type":"string"
               },
               "customTitle":{
                  "type":"string"
               },
               "category":{
                  "type":"string"
               },
               "iconKey":{
                  "type":"string"
               },
               "createdAt":{
                  "type":"string",
                  "format":"date-time"
               },
               "updatedAt":{
                  "type":"string",
                  "format":"date-time"
               }
            },
            "title":"Saved Course Response"
         },
         "CertificateDataRequestDTO":{
            "type":"object",
            "properties":{
               "playlistId":{
                  "type":"string",
                  "minLength":1
               },
               "durationInSeconds":{
                  "type":"integer",
                  "format":"int32"
               }
            },
            "required":[
               "durationInSeconds",
               "playlistId"
            ],
            "title":"Certificate Data Request"
         },
         "UserAuthRegisterRequestDTO":{
            "type":"object",
            "properties":{
               "name":{
                  "type":"string",
                  "minLength":1
               },
               "email":{
                  "type":"string",
                  "description":"Email",
                  "example":"contato@empresaxyz.com.br",
                  "minLength":1,
                  "pattern":"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"
               },
               "username":{
                  "type":"string",
                  "description":"username",
                  "example":"pedro_1234",
                  "minLength":1
               },
               "password":{
                  "type":"string",
                  "description":"Password",
                  "example":"Ab*1example",
                  "minLength":1,
                  "pattern":"^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()_+])[a-zA-Z\\d!@#$%^&*()_+]{8,}$"
               }
            },
            "required":[
               "email",
               "name",
               "password",
               "username"
            ],
            "title":"Auth Register Request"
         },
         "UserResponseDTO":{
            "type":"object",
            "properties":{
               "userId":{
                  "type":"string"
               },
               "name":{
                  "type":"string"
               },
               "username":{
                  "type":"string"
               },
               "avatar":{
                  "type":"string"
               },
               "isVerifiedAccount":{
                  "type":"boolean"
               }
            },
            "title":"User Response"
         },
         "UserAuthLoginRequestDTO":{
            "type":"object",
            "properties":{
               "login":{
                  "type":"string",
                  "minLength":1
               },
               "password":{
                  "type":"string",
                  "description":"Password",
                  "example":"Ab*1example",
                  "minLength":1
               }
            },
            "required":[
               "login",
               "password"
            ],
            "title":"Auth Login Request"
         },
         "TokenResponseDTO":{
            "type":"object",
            "properties":{
               "token":{
                  "type":"string"
               }
            },
            "title":"Token Response"
         },
         "UserForgotPasswordRequestDTO":{
            "type":"object",
            "properties":{
               "token":{
                  "type":"string",
                  "minLength":1
               },
               "newPassword":{
                  "type":"string",
                  "description":"Password",
                  "example":"Ab*1example",
                  "minLength":1,
                  "pattern":"^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()_+])[a-zA-Z\\d!@#$%^&*()_+]{8,}$"
               }
            },
            "required":[
               "newPassword",
               "token"
            ],
            "title":"User Forgot Password Request"
         },
         "UserForgotPasswordResponseDTO":{
            "type":"object",
            "properties":{
               "message":{
                  "type":"string"
               }
            },
            "title":"User Forgot Password Response"
         },
         "SavedCourseUpdateRequestDTO":{
            "type":"object",
            "properties":{
               "customTitle":{
                  "type":"string",
                  "maxLength":255,
                  "minLength":0
               },
               "category":{
                  "type":"string",
                  "minLength":1
               },
               "iconKey":{
                  "type":"string",
                  "minLength":1
               }
            },
            "required":[
               "category",
               "customTitle",
               "iconKey"
            ],
            "title":"Saved Course Update Request"
         },
         "UserAvailabilityUsernameResponseDTO":{
            "type":"object",
            "properties":{
               "username":{
                  "type":"string"
               },
               "availability":{
                  "type":"boolean"
               }
            },
            "title":"User Availability Username Response"
         },
         "HealthStatusResponseDTO":{
            "type":"object",
            "properties":{
               "status":{
                  "type":"string"
               }
            },
            "title":"Health Status Response"
         },
         "FeatureFlagsResponseDTO":{
            "type":"object",
            "properties":{
               "features":{
                  "type":"object",
                  "additionalProperties":{
                     "type":"boolean"
                  }
               }
            },
            "title":"Feature Flags Response"
         }
      },
      "securitySchemes":{
         "bearer-key":{
            "type":"http",
            "scheme":"bearer",
            "bearerFormat":"JWT"
         }
      }
   }
}
